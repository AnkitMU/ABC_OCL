âœ… Extracted 8 classes from examples/carrentalsystem/model.xmi
   - Company: 1 attributes, 1 references
   - Branch: 2 attributes, 4 references
   - Vehicle: 7 attributes, 3 references
   - Customer: 2 attributes, 3 references
   - License: 2 attributes, 1 references
   - Rental: 5 attributes, 4 references
   - Payment: 2 attributes, 1 references
   - Reservation: 3 attributes, 3 references

================================================================================
ğŸ” HYBRID FRAMEWORK COMPLETE TEST SUITE
================================================================================

ğŸ“ XMI Model: examples/carrentalsystem/model.xmi
ğŸ“„ OCL File: examples/carrentalsystem/constraints.ocl
ğŸ• Timestamp: 1762347156.0111387

================================================================================
ğŸ” PHASE 0: MODEL CONSISTENCY VALIDATION
================================================================================

ğŸ“‹ Validating XMI and OCL consistency...
   XMI: model.xmi
   OCL: constraints.ocl


================================================================================
ğŸ” MODEL CONSISTENCY VALIDATION
================================================================================
XMI Model: model.xmi
OCL File:  constraints.ocl

ğŸ“¦ XMI Model Classes: 8
   Branch, Company, Customer, License, Payment, Rental, Reservation, Vehicle

ğŸ“‹ OCL Context Classes: 6
   Branch, Company, Customer, Rental, Reservation, Vehicle

ğŸ” Checking Context Classes...
   âœ… All 6 context classes found in XMI model

ğŸ“ Analyzing 10 OCL Constraints...
   âœ… All navigations appear valid

ğŸ“Š Coverage Analysis:
   â„¹ï¸  2 XMI classes have no OCL constraints:
      License, Payment

================================================================================
âœ… VALIDATION PASSED: XMI and OCL belong to the same model
   â€¢ All 6 context classes found
   â€¢ 10 constraints validated
================================================================================


âœ… Validation PASSED - Models are consistent
   â€¢ All 6 context classes found
   â€¢ 10 constraints validated

================================================================================
ğŸ” PHASE 1A: DOMAIN ADAPTATION (Neural Classifier Training)
================================================================================

ğŸ§  Training neural classifier for domain: model
   Model will be saved to: models/adapted_model

[Step 1] Generating domain-specific training data...
âœ… Extracted 8 classes from examples/carrentalsystem/model.xmi
   - Company: 1 attributes, 1 references
   - Branch: 2 attributes, 4 references
   - Vehicle: 7 attributes, 3 references
   - Customer: 2 attributes, 3 references
   - License: 2 attributes, 1 references
   - Rental: 5 attributes, 4 references
   - Payment: 2 attributes, 1 references
   - Reservation: 3 attributes, 3 references

ğŸ”„ Generating OCL examples using 8 domain classes...
âœ… Generated 22800 domain-specific OCL examples
âœ… Saved 22800 domain examples to ocl_domain_model_adapted.json
âœ… Generated 22800 domain examples
   Saved to: ocl_domain_model_adapted.json

[Step 2] Merging with generic training data...
âœ… Merged: 5000 generic + 22800 domain = 27800 total

[Step 3] Training SentenceTransformer classifier...
âœ… Loaded SentenceTransformer model from models/adapted_model
ğŸ§  SentenceTransformer Classifier Training
============================================================
Examples: 27800
Patterns: 50

ğŸ“¥ Generating embeddings with all-MiniLM-L6-v2...
Batches:   0%|          | 0/869 [00:00<?, ?it/s]Batches:   0%|          | 1/869 [00:00<04:42,  3.07it/s]Batches:   0%|          | 4/869 [00:00<01:20, 10.79it/s]Batches:   1%|          | 7/869 [00:00<00:52, 16.38it/s]Batches:   1%|â–         | 11/869 [00:00<00:39, 21.48it/s]Batches:   2%|â–         | 15/869 [00:00<00:33, 25.69it/s]Batches:   2%|â–         | 18/869 [00:00<00:32, 26.00it/s]Batches:   3%|â–         | 22/869 [00:01<00:31, 27.12it/s]Batches:   3%|â–         | 26/869 [00:01<00:28, 29.64it/s]Batches:   3%|â–         | 30/869 [00:01<00:26, 31.61it/s]Batches:   4%|â–         | 34/869 [00:01<00:26, 31.75it/s]Batches:   4%|â–         | 38/869 [00:01<00:25, 33.13it/s]Batches:   5%|â–         | 42/869 [00:01<00:25, 32.48it/s]Batches:   5%|â–Œ         | 46/869 [00:01<00:27, 29.51it/s]Batches:   6%|â–Œ         | 50/869 [00:01<00:26, 31.15it/s]Batches:   6%|â–‹         | 55/869 [00:02<00:23, 34.26it/s]Batches:   7%|â–‹         | 59/869 [00:02<00:23, 34.98it/s]Batches:   7%|â–‹         | 63/869 [00:02<00:22, 36.06it/s]Batches:   8%|â–Š         | 67/869 [00:02<00:21, 36.70it/s]Batches:   8%|â–Š         | 71/869 [00:02<00:22, 35.35it/s]Batches:   9%|â–Š         | 75/869 [00:02<00:24, 32.73it/s]Batches:   9%|â–‰         | 80/869 [00:02<00:22, 35.18it/s]Batches:  10%|â–‰         | 85/869 [00:02<00:21, 36.04it/s]Batches:  10%|â–ˆ         | 90/869 [00:02<00:20, 37.72it/s]Batches:  11%|â–ˆ         | 95/869 [00:03<00:19, 39.31it/s]Batches:  11%|â–ˆâ–        | 99/869 [00:03<00:19, 38.55it/s]Batches:  12%|â–ˆâ–        | 104/869 [00:03<00:19, 39.50it/s]Batches:  13%|â–ˆâ–        | 109/869 [00:03<00:18, 40.19it/s]Batches:  13%|â–ˆâ–        | 114/869 [00:03<00:18, 40.53it/s]Batches:  14%|â–ˆâ–        | 119/869 [00:03<00:19, 38.37it/s]Batches:  14%|â–ˆâ–        | 123/869 [00:03<00:20, 35.55it/s]Batches:  15%|â–ˆâ–        | 128/869 [00:03<00:19, 37.36it/s]Batches:  15%|â–ˆâ–Œ        | 133/869 [00:04<00:20, 36.40it/s]Batches:  16%|â–ˆâ–Œ        | 137/869 [00:04<00:19, 36.99it/s]Batches:  16%|â–ˆâ–Œ        | 141/869 [00:04<00:19, 36.50it/s]Batches:  17%|â–ˆâ–‹        | 146/869 [00:04<00:18, 38.23it/s]Batches:  17%|â–ˆâ–‹        | 150/869 [00:04<00:19, 37.26it/s]Batches:  18%|â–ˆâ–Š        | 154/869 [00:04<00:19, 36.21it/s]Batches:  18%|â–ˆâ–Š        | 159/869 [00:04<00:18, 37.67it/s]Batches:  19%|â–ˆâ–‰        | 164/869 [00:04<00:18, 38.94it/s]Batches:  19%|â–ˆâ–‰        | 169/869 [00:05<00:17, 39.93it/s]Batches:  20%|â–ˆâ–ˆ        | 174/869 [00:05<00:18, 36.88it/s]Batches:  21%|â–ˆâ–ˆ        | 179/869 [00:05<00:18, 37.95it/s]Batches:  21%|â–ˆâ–ˆ        | 183/869 [00:05<00:22, 30.20it/s]Batches:  22%|â–ˆâ–ˆâ–       | 187/869 [00:05<00:22, 29.97it/s]Batches:  22%|â–ˆâ–ˆâ–       | 191/869 [00:05<00:29, 23.13it/s]Batches:  23%|â–ˆâ–ˆâ–       | 196/869 [00:06<00:29, 22.72it/s]Batches:  23%|â–ˆâ–ˆâ–       | 200/869 [00:06<00:26, 25.04it/s]Batches:  24%|â–ˆâ–ˆâ–       | 205/869 [00:06<00:22, 29.29it/s]Batches:  24%|â–ˆâ–ˆâ–       | 210/869 [00:06<00:20, 32.59it/s]Batches:  25%|â–ˆâ–ˆâ–       | 214/869 [00:06<00:19, 33.49it/s]Batches:  25%|â–ˆâ–ˆâ–Œ       | 219/869 [00:06<00:17, 37.15it/s]Batches:  26%|â–ˆâ–ˆâ–Œ       | 224/869 [00:06<00:16, 38.39it/s]Batches:  26%|â–ˆâ–ˆâ–‹       | 230/869 [00:06<00:15, 42.22it/s]Batches:  27%|â–ˆâ–ˆâ–‹       | 235/869 [00:07<00:15, 41.89it/s]Batches:  28%|â–ˆâ–ˆâ–Š       | 240/869 [00:07<00:14, 42.21it/s]Batches:  28%|â–ˆâ–ˆâ–Š       | 245/869 [00:07<00:14, 43.02it/s]Batches:  29%|â–ˆâ–ˆâ–‰       | 251/869 [00:07<00:13, 45.77it/s]Batches:  30%|â–ˆâ–ˆâ–‰       | 257/869 [00:07<00:12, 47.21it/s]Batches:  30%|â–ˆâ–ˆâ–ˆ       | 263/869 [00:07<00:12, 49.22it/s]Batches:  31%|â–ˆâ–ˆâ–ˆ       | 269/869 [00:07<00:11, 50.72it/s]Batches:  32%|â–ˆâ–ˆâ–ˆâ–      | 275/869 [00:07<00:11, 50.97it/s]Batches:  32%|â–ˆâ–ˆâ–ˆâ–      | 281/869 [00:07<00:11, 50.65it/s]Batches:  33%|â–ˆâ–ˆâ–ˆâ–      | 287/869 [00:08<00:11, 50.09it/s]Batches:  34%|â–ˆâ–ˆâ–ˆâ–      | 293/869 [00:08<00:11, 52.20it/s]Batches:  34%|â–ˆâ–ˆâ–ˆâ–      | 299/869 [00:08<00:10, 54.20it/s]Batches:  35%|â–ˆâ–ˆâ–ˆâ–Œ      | 305/869 [00:08<00:10, 54.45it/s]Batches:  36%|â–ˆâ–ˆâ–ˆâ–Œ      | 311/869 [00:08<00:09, 55.88it/s]Batches:  37%|â–ˆâ–ˆâ–ˆâ–‹      | 318/869 [00:08<00:09, 57.25it/s]Batches:  37%|â–ˆâ–ˆâ–ˆâ–‹      | 324/869 [00:08<00:09, 57.07it/s]Batches:  38%|â–ˆâ–ˆâ–ˆâ–Š      | 330/869 [00:08<00:09, 56.13it/s]Batches:  39%|â–ˆâ–ˆâ–ˆâ–Š      | 336/869 [00:08<00:09, 54.86it/s]Batches:  39%|â–ˆâ–ˆâ–ˆâ–‰      | 342/869 [00:09<00:10, 52.38it/s]Batches:  40%|â–ˆâ–ˆâ–ˆâ–ˆ      | 348/869 [00:09<00:09, 52.89it/s]Batches:  41%|â–ˆâ–ˆâ–ˆâ–ˆ      | 354/869 [00:09<00:09, 52.70it/s]Batches:  41%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 360/869 [00:09<00:09, 51.97it/s]Batches:  42%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 366/869 [00:09<00:09, 50.85it/s]Batches:  43%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 373/869 [00:09<00:09, 53.14it/s]Batches:  44%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 379/869 [00:09<00:10, 47.11it/s]Batches:  44%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 384/869 [00:09<00:10, 47.69it/s]Batches:  45%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 389/869 [00:10<00:11, 42.74it/s]Batches:  45%|â–ˆâ–ˆâ–ˆâ–ˆâ–Œ     | 395/869 [00:10<00:10, 46.95it/s]Batches:  46%|â–ˆâ–ˆâ–ˆâ–ˆâ–Œ     | 401/869 [00:10<00:09, 49.43it/s]Batches:  47%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 408/869 [00:10<00:08, 52.84it/s]Batches:  48%|â–ˆâ–ˆâ–ˆâ–ˆâ–Š     | 415/869 [00:10<00:08, 56.60it/s]Batches:  49%|â–ˆâ–ˆâ–ˆâ–ˆâ–Š     | 422/869 [00:10<00:07, 58.55it/s]Batches:  49%|â–ˆâ–ˆâ–ˆâ–ˆâ–‰     | 428/869 [00:10<00:07, 57.92it/s]Batches:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–‰     | 434/869 [00:10<00:07, 58.05it/s]Batches:  51%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 441/869 [00:10<00:07, 60.58it/s]Batches:  52%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 448/869 [00:11<00:06, 60.28it/s]Batches:  52%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 455/869 [00:11<00:07, 53.56it/s]Batches:  53%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 461/869 [00:11<00:07, 54.57it/s]Batches:  54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 468/869 [00:11<00:07, 57.17it/s]Batches:  55%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 475/869 [00:11<00:07, 54.27it/s]Batches:  55%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ    | 482/869 [00:11<00:06, 56.58it/s]Batches:  56%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ    | 488/869 [00:11<00:06, 55.22it/s]Batches:  57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 495/869 [00:11<00:06, 57.18it/s]Batches:  58%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š    | 502/869 [00:12<00:06, 58.17it/s]Batches:  58%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š    | 508/869 [00:12<00:06, 57.74it/s]Batches:  59%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰    | 514/869 [00:12<00:06, 58.28it/s]Batches:  60%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰    | 521/869 [00:12<00:05, 60.08it/s]Batches:  61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 528/869 [00:12<00:05, 61.26it/s]Batches:  62%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 535/869 [00:12<00:06, 50.60it/s]Batches:  62%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 541/869 [00:12<00:06, 51.27it/s]Batches:  63%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 548/869 [00:12<00:05, 54.63it/s]Batches:  64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 554/869 [00:13<00:05, 54.36it/s]Batches:  64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 560/869 [00:13<00:05, 53.66it/s]Batches:  65%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ   | 567/869 [00:13<00:05, 57.22it/s]Batches:  66%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ   | 574/869 [00:13<00:04, 59.53it/s]Batches:  67%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹   | 582/869 [00:13<00:04, 63.69it/s]Batches:  68%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š   | 590/869 [00:13<00:04, 66.95it/s]Batches:  69%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰   | 598/869 [00:13<00:03, 68.52it/s]Batches:  70%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰   | 605/869 [00:13<00:03, 68.24it/s]Batches:  70%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   | 612/869 [00:13<00:03, 67.53it/s]Batches:  71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   | 619/869 [00:13<00:03, 67.34it/s]Batches:  72%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 626/869 [00:14<00:03, 66.31it/s]Batches:  73%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 633/869 [00:14<00:03, 66.79it/s]Batches:  74%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 640/869 [00:14<00:03, 66.56it/s]Batches:  74%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 647/869 [00:14<00:03, 63.02it/s]Batches:  75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 654/869 [00:14<00:03, 63.38it/s]Batches:  76%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 661/869 [00:14<00:03, 64.55it/s]Batches:  77%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹  | 668/869 [00:14<00:03, 65.68it/s]Batches:  78%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 675/869 [00:14<00:03, 64.26it/s]Batches:  78%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 682/869 [00:15<00:04, 38.54it/s]Batches:  79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰  | 688/869 [00:15<00:04, 40.22it/s]Batches:  80%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰  | 694/869 [00:15<00:03, 44.20it/s]Batches:  81%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | 701/869 [00:15<00:03, 48.50it/s]Batches:  81%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 708/869 [00:15<00:03, 52.70it/s]Batches:  82%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 715/869 [00:15<00:02, 56.00it/s]Batches:  83%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 722/869 [00:15<00:02, 59.23it/s]Batches:  84%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 729/869 [00:15<00:02, 61.00it/s]Batches:  85%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 736/869 [00:16<00:02, 62.09it/s]Batches:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 743/869 [00:16<00:01, 63.70it/s]Batches:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹ | 751/869 [00:16<00:01, 65.85it/s]Batches:  87%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹ | 759/869 [00:16<00:01, 67.73it/s]Batches:  88%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š | 766/869 [00:16<00:01, 65.44it/s]Batches:  89%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 773/869 [00:16<00:01, 66.56it/s]Batches:  90%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 780/869 [00:16<00:01, 66.43it/s]Batches:  91%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 787/869 [00:16<00:01, 66.95it/s]Batches:  91%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 794/869 [00:16<00:01, 66.97it/s]Batches:  92%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 802/869 [00:17<00:00, 68.91it/s]Batches:  93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 809/869 [00:17<00:00, 66.35it/s]Batches:  94%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 817/869 [00:17<00:00, 68.74it/s]Batches:  95%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 824/869 [00:17<00:00, 67.82it/s]Batches:  96%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ| 832/869 [00:17<00:00, 69.67it/s]Batches:  97%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 840/869 [00:17<00:00, 68.37it/s]Batches:  98%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š| 848/869 [00:17<00:00, 71.10it/s]Batches:  99%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š| 856/869 [00:17<00:00, 70.51it/s]Batches:  99%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰| 864/869 [00:17<00:00, 72.10it/s]Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 869/869 [00:18<00:00, 48.25it/s]
/Users/ankitjha/Downloads/hybrid-ssr-ocl-full-extended/.venv/lib/python3.13/site-packages/sklearn/linear_model/_logistic.py:1272: FutureWarning: 'multi_class' was deprecated in version 1.5 and will be removed in 1.8. From then on, it will always use 'multinomial'. Leave it to its default value to avoid this warning.
  warnings.warn(
âœ… Embedding shape: (27800, 384)

ğŸ¯ Training LogisticRegression...
âœ… Training accuracy: 0.9955

============================================================
ğŸ‰ Training complete!
Model saved to: models/adapted_model

âœ… Classifier trained and saved to: models/adapted_model

================================================================================
ğŸ” PHASE 1: METADATA EXTRACTION
================================================================================

ğŸ“Š Domain Model: model
   Classes: 8
   Associations: 20

ğŸ“¦ Classes extracted:
   â€¢ Branch
   â€¢ Company
   â€¢ Customer
   â€¢ License
   â€¢ Payment
   â€¢ Rental
   â€¢ Reservation
   â€¢ Vehicle

ğŸ”— Associations extracted:
   â€¢ Company.branches â†’ Branch [0..*] (contained)
   â€¢ Branch.company â†’ Company [1..1]
   â€¢ Branch.vehicles â†’ Vehicle [0..*] (contained)
   â€¢ Branch.rentals â†’ Rental [0..*] (contained)
   â€¢ Branch.reservations â†’ Reservation [0..*] (contained)
   â€¢ Vehicle.branch â†’ Branch [1..1]
   â€¢ Vehicle.rentals â†’ Rental [0..*]
   â€¢ Vehicle.reservations â†’ Reservation [0..*]
   â€¢ Customer.license â†’ License [1..1] (contained)
   â€¢ Customer.rentals â†’ Rental [0..*]
   â€¢ Customer.reservations â†’ Reservation [0..*]
   â€¢ License.customer â†’ Customer [1..1]
   â€¢ Rental.branch â†’ Branch [1..1]
   â€¢ Rental.vehicle â†’ Vehicle [1..1]
   â€¢ Rental.customer â†’ Customer [1..1]
   ... and 5 more

================================================================================
ğŸ” PHASE 2: CONSTRAINT PARSING
================================================================================

ğŸ“‹ Constraints loaded: 10

   1. CapacityRespected (Context: Branch)
      self.vehicles->size() <= self.capacity...

   2. VINUniqueAcrossCompany (Context: Company)
      self.branches.vehicles->isUnique(v | v.vin)...

   3. DatesOrder (Context: Rental)
      self.endDate > self.startDate...

   4. MileageMonotonic (Context: Rental)
      self.mileageEnd >= self.mileageStart...

   5. LegalAgeForAnyRental (Context: Customer)
      self.rentals->notEmpty() implies self.age >= 21...

   ... and 5 more constraints

================================================================================
ğŸ” PHASE 3: PATTERN DETECTION (HYBRID)
================================================================================

ğŸ§  Using Hybrid Approach: Neural Classifier + Comprehensive Regex Fallback
   Confidence Threshold: 0.5 (below this â†’ comprehensive regex)
   Regex Patterns: 617 comprehensive patterns across 50 types
   âš™ï¸  OCL Normalization: ENABLED

ğŸ¯ Detecting patterns in 10 constraints:

    1. CapacityRespected              â†’ size_constraint (conf: 0.972)
    2. VINUniqueAcrossCompany         â†’ uniqueness_constraint (conf: 0.972)
    3. DatesOrder                     â†’ collection_navigation (conf: 0.706)
    4. MileageMonotonic               â†’ numeric_comparison (conf: 0.966)
    5. LegalAgeForAnyRental           â†’ boolean_guard_implies (conf: 0.995)
    6. LicenseValidAtStart            â†’ navigation_chain (conf: 0.642)
    7. NoOverlappingRentals           â†’ pairwise_uniqueness (conf: 0.875)
    8. PaymentMatchesTotalWhenPresent â†’ contractual_temporal (conf: 0.981)
    9. FuelLevelRange                 â†’ numeric_comparison (conf: 0.745)
   10. ValidWindowAndBranch           â†’ boolean_guard_implies (conf: 0.898)

ğŸ“Š Pattern Distribution:
   â€¢ numeric_comparison             : 2 constraint(s)
   â€¢ boolean_guard_implies          : 2 constraint(s)
   â€¢ size_constraint                : 1 constraint(s)
   â€¢ uniqueness_constraint          : 1 constraint(s)
   â€¢ collection_navigation          : 1 constraint(s)
   â€¢ navigation_chain               : 1 constraint(s)
   â€¢ pairwise_uniqueness            : 1 constraint(s)
   â€¢ contractual_temporal           : 1 constraint(s)

ğŸ“‹ Neural Classifier Stats:
   Average Confidence: 0.875
   High Confidence (>=0.5): 10/10
   Regex Fallback Used: 0/10 (0%)

================================================================================
ğŸ” PHASE 4: ASSOCIATION RESOLUTION
================================================================================

ğŸ”— Resolving constraints to domain associations:

    1. CapacityRespected             
       âœ… Association: Branch.vehicles â†’ Vehicle [0..*] (contained)
       âœ… Multiplicity: [0..*]
    2. VINUniqueAcrossCompany        
       âœ… Association: Company.branches â†’ Branch [0..*] (contained)
       âœ… Multiplicity: [0..*]
    3. DatesOrder                    
       â„¹ï¸  Attribute (not association): Rental.endDate : EString
    4. MileageMonotonic              
       â„¹ï¸  Attribute (not association): Rental.mileageEnd : EInt
    5. LegalAgeForAnyRental          
       âœ… Association: Customer.rentals â†’ Rental [0..*]
       âœ… Multiplicity: [0..*]
    6. LicenseValidAtStart           
       âœ… Association: Rental.customer â†’ Customer [1..1]
       âœ… Multiplicity: [1..1]
    7. NoOverlappingRentals          
       âœ… Association: Vehicle.rentals â†’ Rental [0..*]
       âœ… Multiplicity: [0..*]
    8. PaymentMatchesTotalWhenPresent
       âœ… Association: Rental.payment â†’ Payment [0..1] (contained)
       âœ… Multiplicity: [0..1]
    9. FuelLevelRange                
       â„¹ï¸  Attribute (not association): Vehicle.tankLevel : EInt
   10. ValidWindowAndBranch          
       â„¹ï¸  Attribute (not association): Reservation.dateTo : EString

   Resolved: 10, Unresolved: 0

================================================================================
ğŸ” PHASE 5: SMT ENCODING
================================================================================

ğŸ“ Encoding 10 constraints to Z3:

   1. CapacityRespected
      Pattern: size_constraint

ğŸ“ Encoding pattern: size_constraint
   OCL: self.vehicles->size() <= self.capacity...
   Z3 Result: sat
      Z3 Result: sat
      Variables: 19

   2. VINUniqueAcrossCompany
      Pattern: uniqueness_constraint

ğŸ“ Encoding pattern: uniqueness_constraint
   OCL: self.branches.vehicles->isUnique(v | v.vin)...
   Z3 Result: sat
      Z3 Result: sat
      Variables: 10

   3. DatesOrder
      Pattern: collection_navigation

ğŸ“ Encoding pattern: collection_navigation
   OCL: self.endDate > self.startDate...
   Z3 Result: sat
      Z3 Result: sat
      Variables: 1

   4. MileageMonotonic
      Pattern: numeric_comparison

ğŸ“ Encoding pattern: numeric_comparison
   OCL: self.mileageEnd >= self.mileageStart...
   Z3 Result: sat
      Z3 Result: sat
      Variables: 0

   5. LegalAgeForAnyRental
      Pattern: boolean_guard_implies

ğŸ“ Encoding pattern: boolean_guard_implies
   OCL: self.rentals->notEmpty() implies self.age >= 21...
   Z3 Result: sat
      Z3 Result: sat
      Variables: 3

   6. LicenseValidAtStart
      Pattern: navigation_chain

ğŸ“ Encoding pattern: navigation_chain
   OCL: self.customer.license.expiry >= self.startDate...
ğŸ”— Navigation: Rental.customer â†’ Customer [1..1]
   Z3 Result: sat
      Z3 Result: sat
      Variables: 1

   7. NoOverlappingRentals
      Pattern: pairwise_uniqueness

ğŸ“ Encoding pattern: pairwise_uniqueness
   OCL: self.rentals->forAll(r1, r2 |
    r1 <> r2 implies
      r1....
   Z3 Result: sat
      Z3 Result: sat
      Variables: 10

   8. PaymentMatchesTotalWhenPresent
      Pattern: contractual_temporal

ğŸ“ Encoding pattern: contractual_temporal
   OCL: self.payment->notEmpty() implies self.payment.amount = self....
   Z3 Result: sat
      Z3 Result: sat
      Variables: 3

   Successful: 8, Failed: 0

================================================================================
ğŸ” PHASE 6: VERIFICATION
================================================================================

âœ… Verifying 10 constraints:

   1. CapacityRespected
      Constraint: self.vehicles->size() <= self.capacity...

ğŸ“ Encoding pattern: size_constraint
   OCL: self.vehicles->size() <= self.capacity...
   Z3 Result: sat
      âš ï¸  SAT - Counterexample found (violation possible)
      Sample assignment:
         Branch_present_0 = True
         Branch_present_1 = True
         Vehicle_present_0 = True

   2. VINUniqueAcrossCompany
      Constraint: self.branches.vehicles->isUnique(v | v.vin)...

ğŸ“ Encoding pattern: uniqueness_constraint
   OCL: self.branches.vehicles->isUnique(v | v.vin)...
   Z3 Result: sat
      âš ï¸  SAT - Counterexample found (violation possible)
      Sample assignment:
         Branch_present_0 = True
         Branch_present_1 = True
         Branch_present_2 = True

   3. DatesOrder
      Constraint: self.endDate > self.startDate...

ğŸ“ Encoding pattern: collection_navigation
   OCL: self.endDate > self.startDate...
   Z3 Result: sat
      âš ï¸  SAT - Counterexample found (violation possible)
      Sample assignment:
         first = first

   4. MileageMonotonic
      Constraint: self.mileageEnd >= self.mileageStart...

ğŸ“ Encoding pattern: numeric_comparison
   OCL: self.mileageEnd >= self.mileageStart...
   Z3 Result: sat
      âš ï¸  SAT - Counterexample found (violation possible)
      Sample assignment:

   5. LegalAgeForAnyRental
      Constraint: self.rentals->notEmpty() implies self.age >= 21...

ğŸ“ Encoding pattern: boolean_guard_implies
   OCL: self.rentals->notEmpty() implies self.age >= 21...
   Z3 Result: sat
      âš ï¸  SAT - Counterexample found (violation possible)
      Sample assignment:
         age_cons = age_cons
         guard_cond = True
         consequence = False

   Verified: 0, Violations: 5

================================================================================
ğŸ” PHASE 6B: GLOBAL CONSISTENCY VERIFICATION
================================================================================

ğŸ” Auto-generated scope from XMI metadata:
   nVehicle: 1
   nBranch: 1
   nCompany: 1
   nRental: 1
   nCustomer: 1
   nLicense: 1
   nReservation: 1
   nPayment: 1

âœ… Loaded generic model: 8 classes, 20 associations

================================================================================
ğŸŒ GENERIC GLOBAL CONSISTENCY VERIFICATION
================================================================================
Model: model
Classes: Branch, Company, Customer, License, Payment, Rental, Reservation, Vehicle
Verifying 10 constraints can coexist...
Scope: {'nVehicle': 1, 'nBranch': 1, 'nCompany': 1, 'nRental': 1, 'nCustomer': 1, 'nLicense': 1, 'nReservation': 1, 'nPayment': 1}
Mode: RICH INSTANCES (realistic values)
Timeout: 60000ms


ğŸ“¦ Creating shared domain entities (generic)...
   âœ“ Created variables for 8 classes
   âœ“ Created variables for 24 attributes
   âœ“ Created variables for 20 associations

ğŸ”§ Adding domain constraints (generic)...
   âœ“ Added presence, bounds, and totality constraints

ğŸ¯ Adding rich instance semantic constraints...
   âœ“ Capacity constraint for Branch.capacity: > 0
   âœ“ Age constraint for Vehicle.mileage: [0, 150]
   âœ“ Percentage/level constraint for Vehicle.tankLevel: [0, 100]
   âœ“ Age constraint for Customer.age: [0, 150]
   âœ“ Date constraint for License.expiry: > 0
   âœ“ Date constraint for Rental.startDate: > 0
   âœ“ Date constraint for Rental.endDate: > 0
   âœ“ Age constraint for Rental.mileageStart: [0, 150]
   âœ“ Age constraint for Rental.mileageEnd: [0, 150]
   âœ“ Price/cost constraint for Rental.totalAmount: >= 0
   âœ“ Price/cost constraint for Payment.amount: >= 0
   âœ“ Date constraint for Payment.timestamp: > 0
   âœ“ Date constraint for Reservation.dateFrom: > 0
   âœ“ Date constraint for Reservation.dateTo: > 0
   âœ“ Date ordering for Rental: startDate < endDate
   âœ“ Date ordering for Rental: mileageStart < mileageEnd
   âœ“ Date ordering for Reservation: dateFrom < dateTo
   âœ“ Added 17 rich instance constraints total

ğŸ“ Encoding 10 constraints (pattern-based)...

   [1/10] CapacityRespected (size_constraint)
      âœ“ Encoded using pattern 'size_constraint'

   [2/10] VINUniqueAcrossCompany (uniqueness_constraint)
      âœ“ Encoded using pattern 'uniqueness_constraint'

   [3/10] DatesOrder (collection_navigation)
      âœ“ Encoded using pattern 'collection_navigation'

   [4/10] MileageMonotonic (numeric_comparison)
      âœ“ Encoded using pattern 'numeric_comparison'

   [5/10] LegalAgeForAnyRental (boolean_guard_implies)
      âœ“ Encoded using pattern 'boolean_guard_implies'

   [6/10] LicenseValidAtStart (navigation_chain)
      âœ“ Encoded using pattern 'navigation_chain'

   [7/10] NoOverlappingRentals (pairwise_uniqueness)
      âœ“ Encoded using pattern 'pairwise_uniqueness'

   [8/10] PaymentMatchesTotalWhenPresent (contractual_temporal)
      âœ“ Encoded using pattern 'contractual_temporal'

   [9/10] FuelLevelRange (numeric_comparison)
      âœ“ Encoded using pattern 'numeric_comparison'

   [10/10] ValidWindowAndBranch (boolean_operations)
      âœ“ Encoded using pattern 'boolean_operations'

âœ… Encoded 10/10 constraints successfully

ğŸ” Checking satisfiability...
   (This may take a moment...)

================================================================================
âœ… MODEL IS CONSISTENT
================================================================================
All constraints can be satisfied simultaneously!
A valid model instance exists.

ğŸ“‹ Example Valid Instance:
================================================================================
â„¹ï¸  Values formatted for readability. Use show_raw_values=True to see Z3 values.

ğŸ“¦ BRANCHS:
   Branch#0
      â€¢ name: Branch_0_name
      â€¢ capacity: 6

ğŸ“¦ COMPANYS:
   Company#0
      â€¢ name: Company_0_name

ğŸ“¦ CUSTOMERS:
   Customer#0
      â€¢ name: Customer_0_name
      â€¢ age: 25

ğŸ“¦ LICENSES:
   License#0
      â€¢ number: License_0_number
      â€¢ expiry: 2024-01-02

ğŸ“¦ PAYMENTS:
   Payment#0
      â€¢ amount: $0.00
      â€¢ timestamp: 2024-01-02

ğŸ“¦ RENTALS:
   Rental#0
      â€¢ startDate: 2024-01-02
      â€¢ endDate: 2024-01-03
      â€¢ mileageStart: 0 km
      â€¢ mileageEnd: 1,000 km
      â€¢ totalAmount: $0.00

ğŸ“¦ RESERVATIONS:
   Reservation#0
      â€¢ dateFrom: 2024-01-02
      â€¢ dateTo: 2024-01-03
      â€¢ createdAt: Reservation_0_createdAt

ğŸ“¦ VEHICLES:
   Vehicle#0
      â€¢ vin: 1HGCM82633A1000000
      â€¢ category: Vehicle_0_category
      â€¢ seats: 4
      â€¢ mileage: 0 km
      â€¢ tankLevel: 0%
      â€¢ dailyRate: $0.00
      â€¢ status: Vehicle_0_status

